# Домашняя работа по занятию "6.1. Типы и структура СУБД"

> 1. Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

> - Электронные чеки в json виде

JSON умеют хранить куча баз данных. В SQL для JSON есть свои типы данных, можно воспользоваться ими в реляционных БД MySQL или PostgreSQL. 
Из NoSQL можно взять документоориентированные, например, MongoDB или CouchDB.

> - Склады и автомобильные дороги для логистической компании
> - Генеалогические деревья

Наверное, эти данные проще всего организовать в виде графов отношений, и тут напрашиваются NoSQL Graph databases. Neo4j, OrientDB.

> - Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
> - Отношения клиент-покупка для интернет-магазина

Здесь скорее всего подойдут базы данных key-value. Memcached, Redis. 
Хотя смотря как рассматривать эту покупку - это идентификатор? документ? Возможно тут пригодится реляционная DB.

---

> 2. Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

Из критики CAP-теоремы - любое распределённое приложение, пользующееся компьютерной сетью, должно быть устойчиво к ошибкам 
сети, Partition tolerance. Т.е. выбор предполагается между CP и AP. 

> - Данные записываются на все узлы с задержкой до часа (асинхронная запись)

Кажется, здесь жертвуется консистентностью. Тогда это AP. Асинхронная запись должна быть довольно быстрой, похоже на PA/EL.

> - При сетевых сбоях, система может разделиться на 2 раздельных кластера
  
Два раздельных кластера дают доступность, но не имеют консистентности, поэтому AP. Про поведение вне сетевых сбоев ничего не сказано.

> - Система может не прислать корректный ответ или сбросить соединение

Тогда тут нет доступности. С надеждой хоть на консистентность, CP. Про "Else" нет данных.

---
> 3. Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

С одной стороны, эти принципы противоречат друг другу. ACID ставит во главу надёжность, в ущерб скорости, BASE наоборот, 
жертвует консистентностью данных для улучшенных скорости-доступности.   
В реальности, такие сложные продукты, как системы управления базами данных, можно настроить разными способами. Так, 
от PostgreSQL, которая считается ACID-системой, можно для лучшей скорости отвинтить Durability, 
выключив fsync, synchronous_commit и full_page_writes.

---
> 4. Вам дали задачу написать системное решение, основой которого бы послужили:
> - фиксация некоторых значений с временем жизни
> - реакция на истечение таймаута  
>
> Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

Похоже на Redis.  
Из минусов - при отказе Master-ноды нужно вручную выбирать новую (или специальным софтом вроде Redis Sentinel).  
Так же, стоит иметь ввиду, что размер базы данных будет ограничен количеством доступной памяти (in-memory database), 
а попытки реализовать персистентность записью данных на диск чреваты проблемами с производительностью и доступностью.