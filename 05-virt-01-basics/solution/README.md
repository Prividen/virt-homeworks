# Домашняя работа по занятию "5.1. Основы виртуализации"

> 1. Вкратце опишите, как вы поняли - в чем основное отличие паравиртуализации и виртуализации на основе ОС.

- Паравиртуализация требует гипервизора (монитора виртуальных машин), и, 
  предоставляя специальное API для прямого доступа к оборудованию хоста или отдельным подсистемам OS 
  (менеджмент памяти), требует модифицированного ядра/драйверов в гостевой операционной системе. 
  На хосте и в гостевых системах могут использоваться разные OS и разные версии/варианты ядер.
- "виртуализацию на основе ОС", или контейнеризацию, и виртуализацией-то можно назвать 
  только с большой натяжкой. Для хоста и всех контейнеров используется одно общее ядро/драйвера 
  (т.е. "гости" лимитированы тем же видом OS, что используется и на хосте), 
  код процессов исполняется на процессоре "как есть", без всякой трансляции или подмены 
  отдельных инструкций. Вся "виртуализация" сводится к изоляции - файловой системы, 
  пространства процессов, сети, вызовов IPC, etc. А так же ограничения системных ресурсов.
  Эдак и chroot можно назвать "виртуализацией"...

---
> 2. Выберите тип один из вариантов использования организации физических серверов, 
в зависимости от условий использования.

> Условия использования:
> - Высоконагруженная база данных, чувствительная к отказу

Такую БД можно разместить на физических серверах, для сведения к нулю издержек виртуализации. 
И OS можно будет тонко настроить именно под БД. Чувствительность к отказу нужно будет решать резервными 
серверами, горячей репликой, всё это вот.

Но, если у нас нет выделенных резервных серверов и не хватило лицензий на горячие реплики, можно подумать 
и про паравиртуализацию. За счёт прямой работы с оборудованием/памятью накладные расходы на виртуализацию 
будут минимальны, а высокая отказоустойчивость может быть предоставлена например HA-кластером - миграция
виртуалок, мгновенный рестарт на другом сервере в случае отказа железа.

И даже контейнеризация - в случае выделенных серверов её можно использовать для дистрибуции софта, 
в рамках CI/CD, и т.д.

> - Различные Java-приложения

Если запинать жадную Яву, чтобы она не отжирала всю память, которую только найдёт и ещё_немножко, 
то для неё вполне подойдёт контейнеризация. Эти ява-приложения скорее всего будут успешно работать 
в той же OS, что стоит и на хосте, т.е. городить ради неё виртуализацию смысла нет.

> - Windows системы для использования Бухгалтерским отделом 

Предпочтительней всего выглядит паравиртуализация. Мы можем запускать эти системы на хостах с другими OS, 
а так же хорошенько их изолировать и ограничить в ресурсах. Проблемы могут быть с разными токенами и 
аппаратными ключами, бухгалтерский софт обожает их использовать. 
Если не удастся прокинуть эти железки внутрь виртуалок, придётся взять физические сервера.

> - Системы, выполняющие высокопроизводительные расчеты на GPU

Здесь наверное всё сведётся к проблеме - можем ли мы прокинуть GPU внутрь виртуалки/контейнера. 
Если можем, то вроде бы ничего не мешает использовать виртуализацию-контейнеризацию. Иначе остаётся 
только вариант физического сервера.  

---

> 3. Как вы думаете, возможно ли совмещать несколько типов виртуализации на одном сервере?
Приведите пример такого совмещения.

Возможно. Самый простой пример, когда например на моей рабочей воркстанции работает и KVM со своими 
тестовыми виртуалочками, и докер с контейнерами. И даже файрфокс в отдельном сетевом неймспейсе.
Или, другой распространённый пример, когда на сервере гипервизор, у него виртуалочки, а в них 
докеры-контейнеры.
Так же сюда наверное можно отнести всякие извращения со вложенной виртуализацией - docker in docker, 
виртуалка с ESXi внутри неё, etc.
